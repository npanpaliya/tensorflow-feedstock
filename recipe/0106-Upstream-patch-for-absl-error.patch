From c88b58c548cba3b0b0e3c8455141c0132947ddc8 Mon Sep 17 00:00:00 2001
From: Nishidha Panpaliya <npanpa23@in.ibm.com>
Date: Fri, 2 Apr 2021 09:21:52 +0000
Subject: [PATCH] Fix for Absl error with gcc 5.4 on x86

---
 .../absl/com_google_absl_fix_mac_and_nvcc_build.patch       | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/third_party/absl/com_google_absl_fix_mac_and_nvcc_build.patch b/third_party/absl/com_google_absl_fix_mac_and_nvcc_build.patch
index 1b53190..643dca0 100644
--- a/third_party/absl/com_google_absl_fix_mac_and_nvcc_build.patch
+++ b/third_party/absl/com_google_absl_fix_mac_and_nvcc_build.patch
@@ -333,3 +333,16 @@ index 45a9529..57c954e 100644
      visibility = ["//visibility:public"],
      deps = [
          ":civil_time",
+diff -Naur abseil-cpp/absl/time/internal/cctz/include/cctz/civil_time_detail.h abseil-cpp_org/absl/time/internal/cctz/include/cctz/civil_time_detail.h
+--- abseil-cpp/absl/time/internal/cctz/include/cctz/civil_time_detail.h 2021-01-19 18:49:15.000000000 +0000
++++ abseil-cpp_org/absl/time/internal/cctz/include/cctz/civil_time_detail.h     2021-04-02 09:19:29.053075408 +0000
+@@ -23,7 +23,7 @@
+ #include "absl/base/config.h"
+
+ // Disable constexpr support unless we are in C++14 mode.
+-#if __cpp_constexpr >= 201304 || (defined(_MSC_VER) && _MSC_VER >= 1910)
++#if (!defined(NO_CONSTEXPR_FOR_YOU) && __cpp_constexpr >= 201304) || (defined(_MSC_VER) && _MSC_VER >= 1910)
+ #define CONSTEXPR_D constexpr  // data
+ #define CONSTEXPR_F constexpr  // function
+ #define CONSTEXPR_M constexpr  // member
+
-- 
1.8.3.1

